---
const currentPath = new URL(Astro.request.url).pathname;

const navItems = [
  { label: 'Home', path: '/pomptheus-web/' },
  { label: 'About', path: '/pomptheus-web/about/' },
  { label: 'Projects', path: '/pomptheus-web/projects/' },
  { label: 'Memory', path: '/pomptheus-web/memory/' },
];
---

<header class="sticky top-0 z-50 bg-slate-950/95 backdrop-blur-md border-b border-slate-800/50">
  <nav class="container-custom flex items-center justify-between h-16 px-4 md:px-8 lg:px-12">
    <!-- Logo -->
    <a
      href="/"
      class="flex items-center gap-2 font-bold text-xl md:text-2xl group"
    >
      <span class="text-2xl md:text-3xl group-hover:animate-pulse">ðŸ”¥</span>
      <span class="bg-gradient-to-r from-ember-400 to-flame-400 bg-clip-text text-transparent">
        Pomptheus
      </span>
    </a>

    <!-- Desktop Navigation -->
    <div class="hidden md:flex items-center gap-1">
      {
        navItems.map((item) => {
          const isActive = currentPath === item.path || (item.path !== '/' && currentPath.startsWith(item.path));
          return (
            <a
              href={item.path}
              class={`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${
                isActive
                  ? 'bg-ember-600/20 text-ember-400 border border-ember-500/30'
                  : 'text-slate-300 hover:text-ember-400 hover:bg-slate-800/50'
              }`}
            >
              {item.label}
            </a>
          );
        })
      }
    </div>

    <!-- Mobile Menu Button -->
    <button
      id="mobile-menu-btn"
      class="md:hidden flex flex-col gap-1 p-2 hover:bg-slate-800 rounded-lg transition-colors"
      aria-label="Toggle mobile menu"
    >
      <span class="w-6 h-0.5 bg-slate-300 rounded"></span>
      <span class="w-6 h-0.5 bg-slate-300 rounded"></span>
      <span class="w-6 h-0.5 bg-slate-300 rounded"></span>
    </button>
  </nav>

  <!-- Mobile Navigation -->
  <div
    id="mobile-menu"
    class="hidden md:hidden bg-slate-900/95 backdrop-blur-md border-t border-slate-800/50"
  >
    <nav class="flex flex-col gap-0">
      {
        navItems.map((item) => {
          const isActive = currentPath === item.path || (item.path !== '/' && currentPath.startsWith(item.path));
          return (
            <a
              href={item.path}
              class={`px-4 py-3 font-medium transition-colors border-l-2 ${
                isActive
                  ? 'bg-ember-600/10 text-ember-400 border-ember-500'
                  : 'text-slate-300 border-slate-800 hover:text-ember-400 hover:bg-slate-800/50'
              }`}
            >
              {item.label}
            </a>
          );
        })
      }
    </nav>
  </div>
</header>

<script>
  // Mobile menu toggle
  const mobileMenuBtn = document.getElementById('mobile-menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');

  if (mobileMenuBtn && mobileMenu) {
    mobileMenuBtn.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
    });

    // Close menu when a link is clicked
    mobileMenu.querySelectorAll('a').forEach((link) => {
      link.addEventListener('click', () => {
        mobileMenu.classList.add('hidden');
      });
    });
  }
</script>
